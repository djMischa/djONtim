<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DJ Timer</title>

<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    #setupPanel {
        position: absolute;
        top: 20px;
        left: 20px;
        right: 20px;
        color: white;
        font-family: Arial, sans-serif;
    }

    label, select, input {
        font-size: 1.2rem;
    }

    #timerDisplay {
        font-size: 22vw;
        letter-spacing: -0.02em;
        color: white;
        text-align: center;
        font-family: 'Roboto Mono', monospace;
        user-select: none;
        -webkit-user-select: none;
    }

    /* Neon options */
    .neon-blue { text-shadow: 0 0 20px #0ff; color: #6cf; }
    .neon-pink { text-shadow: 0 0 20px #f0f; color: #f6c; }
    .neon-green { text-shadow: 0 0 20px #0f0; color: #afc; }

    #hiddenButton {
        display: none;
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 1.5rem;
        padding: 12px 26px;
        border-radius: 10px;
        background: rgba(255,255,255,0.2);
        border: 2px solid white;
        color: white;
    }
</style>
</head>

<body>

<div id="setupPanel">
    <label>Mode: </label>
    <select id="mode">
        <option value="countdown">Countdown</option>
        <option value="countup">Count Up</option>
    </select>
    <br><br>

    <label>Font Style: </label>
    <select id="fontStyle">
        <option value="default">Default Mono</option>
        <option value="neon-blue">Neon Blue</option>
        <option value="neon-pink">Neon Pink</option>
        <option value="neon-green">Neon Green</option>
    </select>
    <br><br>

    <label>Minutes: </label>
    <input id="minutes" type="number" min="0" value="1">

    <label>Seconds (optional): </label>
    <input id="seconds" type="number" min="0" max="59" value="0">
    <br><br>

    <button onclick="startTimer()">Start</button>
</div>

<div id="timerDisplay">00:00:00</div>

<button id="hiddenButton" onclick="toggleTimer()">Stop / Reset</button>

<script>
let interval = null;
let startTime;
let targetTime;
let running = false;
let mode = "countdown";

document.body.addEventListener("click", () => {
    if (running) {
        const btn = document.getElementById("hiddenButton");
        btn.style.display = btn.style.display === "none" ? "block" : "none";
    }
});

function startTimer() {
    mode = document.getElementById("mode").value;

    // Apply font class
    const font = document.getElementById("fontStyle").value;
    const disp = document.getElementById("timerDisplay");
    disp.className = font === "default" ? "" : font;

    // Time parsing
    let min = parseInt(document.getElementById("minutes").value || "0");
    let sec = parseInt(document.getElementById("seconds").value || "0");

    if (mode === "countdown") {
        targetTime = (min * 60 + sec) * 1000;
    }

    // Hide setup, reset hidden button
    document.getElementById("setupPanel").style.display = "none";
    document.getElementById("hiddenButton").style.display = "none";

    running = true;
    startTime = performance.now();
    interval = requestAnimationFrame(update);
}

function toggleTimer() {
    if (!running) return;
    cancelAnimationFrame(interval);
    running = false;
    location.reload(); // easiest clean reset
}

function update(timestamp) {
    let elapsed = timestamp - startTime;

    if (mode === "countup") {
        displayTime(elapsed);
        interval = requestAnimationFrame(update);
        return;
    }

    // Countdown mode
    let remaining = targetTime - elapsed;
    if (remaining <= 0) {
        displayTime(0);
        running = false;
        return;
    }

    displayTime(remaining);
    interval = requestAnimationFrame(update);
}

function displayTime(ms) {
    let totalHundredths = Math.floor(ms / 10);
    let hundredths = totalHundredths % 100;
    let totalSeconds = Math.floor(totalHundredths / 100);
    let seconds = totalSeconds % 60;
    let minutes = Math.floor(totalSeconds / 60);

    document.getElementById("timerDisplay").textContent =
        `${pad(minutes)}:${pad(seconds)}:${pad(hundredths)}`;
}

function pad(n) {
    return n < 10 ? "0" + n : n;
}
</script>

</body>
</html>

